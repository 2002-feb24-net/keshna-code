


CREATE TABLE PRODUCTSS(
ID INT IDENTITY NOT NULL,
Pname NVARCHAR(255) NOT NULL,
PRICE MONEY NOT NULL,
CONSTRAINT PK_PRODUCTS PRIMARY KEY (ID),
);

CREATE TABLE CUSTOMERSS(
ID INT IDENTITY NOT NULL,
FirstName NVARCHAR(255) NOT NULL,
LastName NVARCHAR(255) NOT NULL,
CardNumber NVARCHAR(10) NOT NULL
CONSTRAINT PK_CUSTOMERS PRIMARY KEY (ID),
CONSTRAINT CHK_Card_CorrectDigits CHECK (LEN(CardNumber) = 10),
);
ALTER TABLE CUSTOMERSS
ADD CONSTRAINT UNI_Card UNIQUE (CardNumber);

CREATE TABLE ORDERSS(
ID INT IDENTITY NOT NULL,
CustomerID INT NOT NULL,
ProductID INT NOT NULL,
CONSTRAINT PK_ORDERSS PRIMARY KEY (ID),
CONSTRAINT FK_Orders_PRODUCTS_ID FOREIGN KEY (ProductID) REFERENCES PRODUCTSS(ID),
CONSTRAINT FK_Orders_CUSTOMERS_ID FOREIGN KEY (CustomerID) REFERENCES CUSTOMERSS(ID)
);
SELECT * FROM CUSTOMERSS ;
SELECT * FROM PRODUCTSS ;
SELECT * FROM ORDERSS ;

INSERT INTO PRODUCTSS (Pname, PRICE) 
Values ('Tab', 500),
       ('Samsung', 450),
       ('Oppo', 270);

INSERT INTO CUSTOMERSS 
Values ('Anne', 'Frank', '1234567890'),
       ('Mandy', 'Andy', '0987654321'),
       ('Sandy', 'Cool', '9425613438');

INSERT INTO ORDERSS
Values (8, 1 ),
       (9, 2 ),
       (10,3);

INSERT INTO PRODUCTSS
VALUES ('iPhone', 200);

INSERT INTO CUSTOMERSS
VALUES ('Tina', 'Smith', '1234098765');
--ID OF TINA IS 4
INSERT INTO ORDERS VALUES(4,2);

-- List all orders by tina
SELECT ORDERSS.CustomerID, ORDERSS.ProductID 
FROM ORDERSS
WHERE ORDERSS.CustomerID = 4;

UPDATE PRODUCTSS
SET PRODUCTSS.PRICE = 250,
WHERE PRODUCTSS.Pname = 'IPHONE';


SELECT SUM(p.Price) from ORDERS o inner join PRODUCTSS p on o.ProductID =p.Id where P.Pname = 'IPhone'
